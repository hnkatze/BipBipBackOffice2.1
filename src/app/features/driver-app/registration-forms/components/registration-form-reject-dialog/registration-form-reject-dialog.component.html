<p-dialog
  header="Rechazar Solicitud"
  [(visible)]="visible"
  [modal]="true"
  [style]="{ width: '500px' }"
  [draggable]="false"
  [resizable]="false"
>
  <div class="reject-dialog-content">
    <p class="mb-3">¿Estás seguro que querés rechazar esta solicitud?</p>
    <p class="text-sm text-muted mb-4">
      Por favor, ingresá un comentario explicando el motivo del rechazo.
    </p>

    <textarea
      pInputTextarea
      [formControl]="commentControl"
      placeholder="Comentario (obligatorio, máximo 200 caracteres)"
      [rows]="4"
      [maxlength]="200"
      class="w-full"
    ></textarea>

    <div class="flex justify-content-between align-items-center mt-2">
      <small
        class="char-counter"
        [class.text-danger]="(commentControl.value?.length || 0) > 200"
      >
        {{ commentControl.value?.length || 0 }} / 200
      </small>

      @if (commentControl.invalid && commentControl.touched) {
        <small class="text-danger">
          El comentario es obligatorio (mínimo 10 caracteres)
        </small>
      }
    </div>
  </div>

  <ng-template pTemplate="footer">
    <p-button
      label="Cancelar"
      [outlined]="true"
      (onClick)="cancel()"
    />
    <p-button
      label="Rechazar"
      severity="danger"
      [disabled]="commentControl.invalid"
      (onClick)="confirm()"
    />
  </ng-template>
</p-dialog>
